### H5填坑之旅

**1、解决前端alert弹窗中出现网址的问题**

<img src="./pro_images/alert.png" width = "400"/>

* 其实现在有很多插件很好用，比如layer，原生的解决方法主要是重写alert的iframe弹出框，代码如下：

```
window.alert = function(name){

      var iframe = document.createElement("IFRAME");
      iframe.style.display="none";
      iframe.setAttribute("src", 'data:text/plain,');
      document.documentElement.appendChild(iframe);
      window.frames[0].window.alert(name);
      iframe.parentNode.removeChild(iframe);

     };
```

**2、解决安卓手机下拉框设置透明之后还有白色背景的问题，添加css样式**

```
/非常重要/
 appearance:none;
-moz-appearance:none;
-webkit-appearance:none;

/设置背景透明/
border: 0;
background: rgba(0, 0, 0, 0);
```

**3、解决安卓小米华为手机inut框弹出键盘，压缩背景图导致排版错乱的处理方式**

```
var HEIGHT = $('body').height();

$(window).resize(function() {
        $("body").height(HEIGHT);
});

$("#body").find('input').on("focus blur",function(){
         $("#body").height(HEIGHT);
});
```

**4、解决安卓小米华为手机inut框弹出键盘，背景图随之上弹，隐藏后，背景图不恢复原状**

```
$(document).on("blur focus","input,select",function(){
        window.scroll(0,0);
});
```

**5、解决IPhone手机音乐不能自动播放的问题**

```
document.addEventListener('DOMContentLoaded',function (){
         var audio = document.getElementById("id名称");
              audio.play();
          document.addEventListener("WeixinJSBridgeReady", function () {
              audio.play();
         }, false);
 });
```


**6、解决安卓苹果H5视频的播放所有问题**

* 使用Ckpleyer插件，调用其中H5的视频播放，兼容当前市面上几乎所有手机，好好看其开发文档

**7、关于canvas合成用户头像和其他图片，开发者工具中可以，但是真机上合成不了的解决办法**

* 因为用户的头像为base64格式的，虽然可以直接展示，但是合成为图片的话，必须先将用户图像保存到本地，再进行合成才能成功，将用户头像的base_64位数据传到后胎进行处理,php代码如下：

```php
	//注意base64_decode根式中的参数是不携带data:image/png;base64,标志的，请自行使用正则处理后再使用
 	$data = base64_decode($_POST['base_64']);

    if (!is_dir("./upload/")) {
        mkdir("./upload/",0777,true);
    }

    $tagName = "./upload/".date('YmdHis').rand(1000,9999).'.jpg';

    if (file_put_contents($tagName, $data)) {
        echo json_encode($tagName);
    }
```

**8、关于合成图片时，总是因为图片没有加载完成导致合成不成功**

```
var img = new Image;
img.src = "图片路径";
img.crossOrigin = 'Anonymous';

###重要

img.onload = function(){
	###做逻辑处理
}
```

